# dailymed-api

Microservice-based application that extracts drug indications from DailyMed

## Project structure

```py
├── src/
│   ├── application/                                         # Application Layer (Use Cases, Application Services)
│   │   ├── use-cases/                                       # Domain logic for specific features
│   │   │   └── process-drug-label/
│   │   │       ├── process-drug-label.command.ts
│   │   │       └── process-drug-label.use-case.ts
│   │   ├── services/                                        # Application-level services (e.g., querying mapped data)
│   │   │   └── indication-query.service.ts
│   │   ├── dtos/                                            # Data Transfer Objects for application layer boundaries
│   │   │   └── indication-query.dto.ts
│   │   └── interfaces/                                      # Interfaces for external services (defined here, implemented in Infra)
│   │       ├── idailymed.client.ts
│   │       ├── ispl-parser.service.ts
│   │       └── iai-mapper.client.ts
│   ├── domain/                                              # Domain Layer (Core Business Logic)
│   │   ├── entities/                                        # Core business objects (plain classes/interfaces)
│   │   │   ├── drug-label.entity.ts
│   │   │   └── indication.entity.ts
│   │   ├── repositories/                                    # Repository Interfaces (defined here, implemented in Infra)
│   │   │   ├── idrug-label.repository.ts
│   │   │   └── iindication-mapping.repository.ts
│   │   └──...                                               # Domain services, value objects (if needed)
│   ├── infrastructure/                                      # Infrastructure Layer (Frameworks, DB, External Services)
│   │   ├── controllers/                                     # NestJS HTTP Controllers
│   │   │   ├── indication.controller.ts
│   │   │   └── auth.controller.ts
│   │   ├── database/                                        # Database specific code (PostgreSQL/TypeORM)
│   │   │   ├── entities/                                    # TypeORM Entities (decorated classes)
│   │   │   │   ├── drug-label.typeorm.entity.ts
│   │   │   │   ├── indication.typeorm.entity.ts
│   │   │   │   └── icd10-mapping.typeorm.entity.ts
│   │   │   ├── repositories/                                # TypeORM Repository Implementations
│   │   │   │   ├── drug-label.typeorm.repository.ts
│   │   │   │   └── indication-mapping.typeorm.repository.ts
│   │   │   ├── migrations/                                  # Database migrations generated by TypeORM CLI
│   │   │   └── database.module.ts                           # Module for TypeORM configuration
│   │   ├── external-services/                               # Clients for external APIs
│   │   │   ├── dailymed/
│   │   │   │   └── dailymed.client.ts                       # Implements IDailyMedClient
│   │   │   ├── spl-parser/
│   │   │   │   └── spl-parser.service.ts                    # Implements ISplParserService
│   │   │   └── ai-mapping/
│   │   │       └── comprehend.client.ts                     # Implements IAiMapperClient (or LlmClient)
│   │   ├── auth/                                            # Authentication specific infrastructure
│   │   │   ├── strategies/
│   │   │   │   └── jwt.strategy.ts
│   │   │   ├── guards/
│   │   │   │   ├── jwt-auth.guard.ts
│   │   │   │   └── roles.guard.ts                           # RBAC
│   │   │   ├── decorators/
│   │   │   │   └── roles.decorator.ts                       # RBAC
│   │   │   └── auth.module.ts
│   │   ├── queues/                                          # Queue Producers and Consumers
│   │   │   ├── producers/
│   │   │   │   └── label-processing.producer.ts
│   │   │   ├── consumers/
│   │   │   │   ├── label-processing.consumer.ts
│   │   │   │   └── indication-mapping.consumer.ts
│   │   │   └── queue.module.ts
│   │   └──...                                               # Other infra: Logging, Caching config
│   ├── shared/                                              # Shared utilities, constants, config interfaces (optional)
│   │   └── config/
│   │       └── app-config.interface.ts
│   ├── app.module.ts                                        # Root application module
│   └── main.ts                                              # Main application entry point
├── test/                                                    # Unit, Integration, E2E tests
│   ├── unit/
│   ├── integration/
│   └── e2e/
├── Containerfile                                            # or Dockerfile
├── compose.yml                                              # or docker-compose.yml
├──.env.dev
└── README.md
```
